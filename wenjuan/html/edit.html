<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>两个界面先写在一起</title>
    <link rel='stylesheet' href='../stylesheets/vendor/bootstrap.css' />
    <link rel='stylesheet' href='../stylesheets/vendor/flat-ui.css' />
    <link rel='stylesheet' href='../stylesheets/vendor/font-awesome.css' />
    <link rel='stylesheet' href='../stylesheets/style.css' />
    <script src='../js/vendor/jquery.min.js'></script>
    <script src='../js/vendor/jquery-ui.min.js'></script>
    <style>
        .edit-leftwrapper {float:left;width:168px;}
        .edit-rightwrapper {margin-left:180px;}

        .draggnav, .sortnav{padding-left:0;list-style-type:none;background-color:#eee;}
        .draggnav {padding:10px 20px;}
        .draggnav li>span {display:inline-block;width:20px;margin-right:10px;}
        .sortnav {padding:10px;}
        
    </style>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="edit-leftwrapper">
            <ul class="draggnav" id="J-draggnav">
                <li data-change="true" data-type="radio"><span class="fui-radio-checked"></span>单选题</li>
                <li data-change="true" data-type="checkbox"><span class="fui-checkbox-checked"></span>多选题</li>
                <li data-change="true" data-type="img-radio"><span class="fui-image"></span>图片单选题</li>
                <li data-change="true" data-type="img-checkbox"><span class="fui-image"></span>图片多选题</li>
                <li data-change="true" data-type="single-input"><span>A</span>单行填空题</li>
                <li data-change="true" data-type="multi-input"><span class="fui-list-columned"></span>多项填空题</li>
                <li data-change="true" data-type="textarea"><span class="fui-folder"></span>多行填空题</li>
                <li data-change="true" data-type="sort"><span class="fui-upload"></span>排序题</li>
                <li data-change="true" data-type="score"><span class="fui-star-2"></span>打分题</li>
                <li data-change="true" data-type="matrix-radio"><span class="fui-list-numbered"></span>矩阵单选题</li>
                <li data-change="true" data-type="matrix-checkbox"><span class="fui-list-numbered"></span>矩阵多选题</li>
                <li data-change="true" data-type="matrix-input"><span class="fui-list-numbered"></span>矩阵填空题</li>
                <li data-change="true" data-type="info"><span class="fui-tag"></span>段落说明</li>
                <li data-change="true" data-type="pagination"><span class="fui-clip"></span>分页</li>
            </ul>

        </div>
        <div class="edit-rightwrapper">
            <ul class="sortnav" id="J-sortarea">
                <li>
                    <input placeholder="什么"/>
                </li>
            </ul>
        </div>
    
    </div>
</div>
<script type="text/html" id="M-radio">
    <input type="radio"/ >
</script>
<script type="text/html" id="M-checkbox">
    <input type="checkbox"/ >
</script>
<script type="text/html" id="M-img-radio">
    <input type="radio"/ >
</script>
<script type="text/html" id="M-img-checkbox">
    <input type="checkbox"/ >
</script>
<script type="text/html" id="M-single-input">
    <input type="text"/ >
</script>
<script type="text/html" id="M-multi-input">
    <input type="text"/ >
</script>
<script type="text/html" id="M-textarea">
    <input type="textarea"/ >
</script>
<script type="text/html" id="M-sort">
    <input type="button"/ >
</script>
<script type="text/html" id="M-score">
    <input type="button"/ >
</script>
<script type="text/html" id="M-matrix-radio">
    <input type="radio"/ >
</script>
<script type="text/html" id="M-matrix-checkbox">
    <input type="checkbox"/ >
</script>
<script type="text/html" id="M-matrix-input">
    <input type="text"/ >
</script>
<script type="text/html" id="M-info">
    <p>段落</p>
</script>
<script type="text/html" id="M-pagination">
    <p>分页</p>
</script>
<script>
$(function() {
    $('#J-sortarea').sortable({
        revert: true
    });
    $('#J-draggnav li').draggable({
        connectToSortable: '#J-sortarea',
        addClasses: false,
        helper: 'clone',
        revert: 'invalid',
        stop: function(event, ui){
            rebuild('#J-sortarea');
        }
    });
    function rebuild(id) {
        console.log($(id).children('li').length);
        $(id).children('li').each(function() {
            if ($(this).attr('data-change') && $(this).attr('data-type')) {
               console.log($(this).attr('data-type')); 
               switchbuild($(this));
            };
        });
    }
    function switchbuild(node) {
        var type = node.attr('data-type');
        node.html($('#M-' + type).html());
        node.css('width', '100%');
    }
});
</script>
</body>
</html>
